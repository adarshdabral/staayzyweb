module.exports=[24361,(a,b,c)=>{b.exports=a.x("util",()=>require("util"))},14747,(a,b,c)=>{b.exports=a.x("path",()=>require("path"))},50778,76472,a=>{"use strict";var b=a.i(70106);let c=(0,b.default)("Bed",[["path",{d:"M2 4v16",key:"vw9hq8"}],["path",{d:"M2 8h18a2 2 0 0 1 2 2v10",key:"1dgv2r"}],["path",{d:"M2 17h20",key:"18nfp3"}],["path",{d:"M6 8v9",key:"1yriud"}]]);a.s(["Bed",()=>c],50778);let d=(0,b.default)("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);a.s(["Heart",()=>d],76472)},21374,a=>{"use strict";let b=(0,a.i(70106).default)("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);a.s(["Star",()=>b],21374)},24987,a=>{"use strict";let b=(0,a.i(70106).default)("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);a.s(["MapPin",()=>b],24987)},9936,a=>{"use strict";var b=a.i(87924),c=a.i(50944),d=a.i(72131),e=a.i(40695),f=a.i(3130),g=a.i(33217),h=a.i(70025),i=a.i(37927),j=a.i(53250),k=a.i(68515),l=a.i(14501),m=a.i(24987),n=a.i(50778),o=a.i(21374),p=a.i(76472),q=a.i(33441);function r(){let a=(0,c.useParams)(),r=(0,c.useRouter)(),{user:s,isAuthenticated:t}=(0,k.useAuthStore)(),{toast:u}=(0,l.useToast)(),v=(0,i.useQueryClient)(),[w,x]=(0,d.useState)(null),[y,z]=(0,d.useState)(new Date().toISOString().split("T")[0]),{data:A,isLoading:B}=g.useQuery({queryKey:["property",a.id],queryFn:async()=>(await j.default.get(`/properties/${a.id}`)).data,enabled:!!a.id,onError:a=>{a?.response?.status!==403&&console.error("Property fetch error:",a?.response?.data||a.message||a)}}),C=A&&!1===A.available?A.property:A,{data:D}=(0,g.useQuery)({queryKey:["reviews",a.id],queryFn:async()=>(await j.default.get(`/reviews/property/${a.id}`)).data,enabled:!!a.id}),E=(0,h.useMutation)({mutationFn:async a=>j.default.post("/wishlist",{propertyId:a}),onSuccess:()=>{u({title:"Added to wishlist",description:"Property added to your wishlist"}),v.invalidateQueries({queryKey:["tenant-wishlist"]})},onError:a=>{u({title:"Error",description:a.response?.data?.message||"Failed to add to wishlist",variant:"destructive"})}}),F=(0,h.useMutation)({mutationFn:async a=>j.default.post("/bookings",a),onSuccess:()=>{u({title:"Booking created",description:"Your booking request has been submitted"}),v.invalidateQueries({queryKey:["tenant-bookings"]}),r.push("/tenant/dashboard")},onError:a=>{u({title:"Booking failed",description:a.response?.data?.message||"Failed to create booking",variant:"destructive"})}});if(B)return(0,b.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,b.jsx)("p",{children:"Loading property details..."})});if(!C)return(0,b.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,b.jsx)("p",{children:"Property not found"})});if(C&&!1===C.available){let a=C.property;return(0,b.jsx)("div",{className:"min-h-screen flex items-center justify-center p-4",children:(0,b.jsxs)("div",{className:"max-w-2xl text-center",children:[(0,b.jsx)("h2",{className:"text-2xl font-bold mb-4",children:"This property is currently unavailable"}),(0,b.jsx)("p",{className:"text-gray-600 mb-4",children:a?.name||"Details are not available"}),(0,b.jsx)("p",{className:"text-sm text-gray-500 mb-6",children:"This listing is not currently approved or is temporarily unavailable."}),(0,b.jsxs)("div",{className:"flex justify-center gap-4",children:[(0,b.jsx)(e.Button,{onClick:()=>r.back(),children:"Go Back"}),(0,b.jsx)(e.Button,{onClick:()=>r.push("/"),variant:"outline",children:"Browse other properties"})]})]})})}return(0,b.jsx)("div",{className:"min-h-screen bg-gray-50 py-12",children:(0,b.jsxs)("div",{className:"container mx-auto px-4 max-w-6xl",children:[(0,b.jsx)("div",{className:"mb-8",children:C.images&&C.images.length>0?(0,b.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:C.images.map((a,c)=>(0,b.jsx)("div",{className:"h-64 bg-gray-200 rounded-lg overflow-hidden",children:(0,b.jsx)("img",{src:a,alt:`${C.name} - Image ${c+1}`,className:"w-full h-full object-cover"})},c))}):(0,b.jsx)("div",{className:"h-96 bg-gray-200 rounded-lg flex items-center justify-center",children:(0,b.jsx)("p",{className:"text-gray-500",children:"No images available"})})}),(0,b.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,b.jsxs)("div",{className:"lg:col-span-2 space-y-6",children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-4xl font-bold mb-2",children:C.name}),(0,b.jsxs)("div",{className:"flex items-center gap-2 text-gray-600",children:[(0,b.jsx)(m.MapPin,{className:"h-5 w-5"}),(0,b.jsx)("span",{children:C.nearestCollege}),(0,b.jsx)("span",{children:"•"}),(0,b.jsxs)("span",{children:[C.distanceFromCollege," km from college"]})]})]}),s?.role==="tenant"&&(0,b.jsx)(e.Button,{variant:"outline",size:"icon",onClick:()=>{if(!t())return r.push("/auth/login");E.mutate(C._id)},children:(0,b.jsx)(p.Heart,{className:"h-5 w-5"})})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,b.jsx)("div",{className:"flex items-center gap-1",children:[void 0,void 0,void 0,void 0,void 0].map((a,c)=>(0,b.jsx)(o.Star,{className:"h-5 w-5 fill-yellow-500 text-yellow-500"},c))}),(0,b.jsx)("span",{className:"text-xl font-bold",children:"5.0"}),(0,b.jsxs)("span",{className:"text-gray-600",children:["(",D?.reviews?.length||0," reviews)"]})]})]}),(0,b.jsxs)(f.Card,{children:[(0,b.jsxs)(f.CardHeader,{children:[(0,b.jsx)(f.CardTitle,{children:"Available Rooms"}),(0,b.jsx)(f.CardDescription,{children:"Select a room type to book"})]}),(0,b.jsx)(f.CardContent,{className:"space-y-4",children:C.rooms?.map(c=>(0,b.jsxs)("div",{className:"border rounded-lg p-4 space-y-4",children:[(0,b.jsx)("div",{className:"flex items-start justify-between",children:(0,b.jsxs)("div",{children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,b.jsx)(n.Bed,{className:"h-5 w-5 text-gray-500"}),(0,b.jsxs)("h3",{className:"text-xl font-semibold capitalize",children:[c.roomType," Room"]}),"sharing"===c.roomType&&(0,b.jsxs)("span",{className:"text-sm text-gray-600",children:["(",c.capacity," sharing capacity)"]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)("p",{className:"text-2xl font-bold text-primary",children:["₹",c.monthlyRent]}),(0,b.jsx)("p",{className:"text-sm text-gray-600",children:"per month"})]}),(0,b.jsx)("div",{children:(0,b.jsxs)("p",{className:"text-lg font-semibold",children:["Security Deposit: ₹",c.securityDeposit]})}),(0,b.jsx)("div",{children:(0,b.jsxs)("p",{className:"text-sm text-gray-600",children:["Available: ",c.availableCount," of ",c.capacity]})})]})]})}),c.rules&&c.rules.length>0&&(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm font-semibold mb-2",children:"Room Rules:"}),(0,b.jsx)("ul",{className:"list-disc list-inside space-y-1 text-sm text-gray-600",children:c.rules.map((a,c)=>(0,b.jsx)("li",{children:a},c))})]}),c.availableCount>0?s?.role==="tenant"?(0,b.jsxs)("div",{className:"space-y-4 pt-4 border-t",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-sm font-medium mb-2 block",children:"Start Date"}),(0,b.jsx)("input",{type:"date",value:y,onChange:a=>z(a.target.value),min:new Date().toISOString().split("T")[0],className:"w-full px-3 py-2 border rounded-md",required:!0})]}),(0,b.jsx)(e.Button,{className:"w-full",onClick:()=>{var b;return b=c._id,void(s?.role!=="tenant"?u({title:"Not allowed",description:"Only tenants can make bookings",variant:"destructive"}):!t()?r.push("/auth/login"):!y?u({title:"Date required",description:"Please select a start date",variant:"destructive"}):F.mutate({propertyId:a.id,roomId:b,startDate:y}))},disabled:F.isPending,children:F.isPending?"Booking...":"Book Now"})]}):(0,b.jsx)("div",{className:"pt-4 border-t",children:(0,b.jsx)("p",{className:"text-sm text-gray-600",children:"Booking is available for tenants only."})}):(0,b.jsx)("div",{className:"pt-4 border-t",children:(0,b.jsx)(e.Button,{className:"w-full",disabled:!0,children:"Fully Booked"})})]},c._id))})]}),C.facilities&&C.facilities.length>0&&(0,b.jsxs)(f.Card,{children:[(0,b.jsx)(f.CardHeader,{children:(0,b.jsx)(f.CardTitle,{children:"Facilities"})}),(0,b.jsx)(f.CardContent,{children:(0,b.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2",children:C.facilities.map((a,c)=>(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(q.Check,{className:"h-4 w-4 text-green-500"}),(0,b.jsx)("span",{className:"text-sm",children:a})]},c))})})]}),(0,b.jsxs)(f.Card,{children:[(0,b.jsxs)(f.CardHeader,{children:[(0,b.jsx)(f.CardTitle,{children:"Reviews"}),(0,b.jsxs)(f.CardDescription,{children:["Average Rating: ",D?.averageRating?.toFixed(1)||"5.0"," / 5.0"]})]}),(0,b.jsx)(f.CardContent,{className:"space-y-4",children:D?.reviews?.length>0?D.reviews.map(a=>(0,b.jsxs)("div",{className:"border-b pb-4 last:border-0",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("div",{className:"h-10 w-10 rounded-full bg-primary/10 flex items-center justify-center",children:(0,b.jsx)("span",{className:"font-semibold",children:a.tenant?.name?.charAt(0)||"U"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"font-semibold",children:a.tenant?.name||"Anonymous"}),(0,b.jsx)("p",{className:"text-sm text-gray-600",children:new Date(a.createdAt).toLocaleDateString()})]})]}),(0,b.jsx)("div",{className:"flex items-center gap-1",children:[...Array(a.rating)].map((a,c)=>(0,b.jsx)(o.Star,{className:"h-4 w-4 fill-yellow-500 text-yellow-500"},c))})]}),(0,b.jsx)("p",{className:"text-gray-700",children:a.comment})]},a._id)):(0,b.jsx)("p",{className:"text-gray-600",children:"No reviews yet"})})]})]}),(0,b.jsx)("div",{className:"space-y-4",children:(0,b.jsxs)(f.Card,{children:[(0,b.jsx)(f.CardHeader,{children:(0,b.jsx)(f.CardTitle,{children:"Property Information"})}),(0,b.jsxs)(f.CardContent,{className:"space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:"Nearest College"}),(0,b.jsx)("p",{className:"font-semibold",children:C.nearestCollege})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:"Distance"}),(0,b.jsxs)("p",{className:"font-semibold",children:[C.distanceFromCollege," km"]})]}),C.owner&&(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:"Owner"}),(0,b.jsx)("p",{className:"font-semibold",children:C.owner.name}),(0,b.jsx)("p",{className:"text-sm text-gray-600",children:C.owner.email})]})]})]})})]})]})})}a.s(["default",()=>r])}];

//# sourceMappingURL=%5Broot-of-the-server%5D__2aa12e0f._.js.map