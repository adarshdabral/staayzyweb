module.exports=[70025,a=>{"use strict";var b=a.i(72131),c=a.i(12794),d=a.i(18544),e=a.i(33791),f=a.i(42871),g=class extends e.Subscribable{#a;#b=void 0;#c;#d;constructor(a,b){super(),this.#a=a,this.setOptions(b),this.bindMethods(),this.#e()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(a){let b=this.options;this.options=this.#a.defaultMutationOptions(a),(0,f.shallowEqualObjects)(this.options,b)||this.#a.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#c,observer:this}),b?.mutationKey&&this.options.mutationKey&&(0,f.hashKey)(b.mutationKey)!==(0,f.hashKey)(this.options.mutationKey)?this.reset():this.#c?.state.status==="pending"&&this.#c.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#c?.removeObserver(this)}onMutationUpdate(a){this.#e(),this.#f(a)}getCurrentResult(){return this.#b}reset(){this.#c?.removeObserver(this),this.#c=void 0,this.#e(),this.#f()}mutate(a,b){return this.#d=b,this.#c?.removeObserver(this),this.#c=this.#a.getMutationCache().build(this.#a,this.options),this.#c.addObserver(this),this.#c.execute(a)}#e(){let a=this.#c?.state??(0,c.getDefaultState)();this.#b={...a,isPending:"pending"===a.status,isSuccess:"success"===a.status,isError:"error"===a.status,isIdle:"idle"===a.status,mutate:this.mutate,reset:this.reset}}#f(a){d.notifyManager.batch(()=>{if(this.#d&&this.hasListeners()){let b=this.#b.variables,c=this.#b.context,d={client:this.#a,meta:this.options.meta,mutationKey:this.options.mutationKey};if(a?.type==="success"){try{this.#d.onSuccess?.(a.data,b,c,d)}catch(a){Promise.reject(a)}try{this.#d.onSettled?.(a.data,null,b,c,d)}catch(a){Promise.reject(a)}}else if(a?.type==="error"){try{this.#d.onError?.(a.error,b,c,d)}catch(a){Promise.reject(a)}try{this.#d.onSettled?.(void 0,a.error,b,c,d)}catch(a){Promise.reject(a)}}}this.listeners.forEach(a=>{a(this.#b)})})}},h=a.i(37927);function i(a,c){let e=(0,h.useQueryClient)(c),[i]=b.useState(()=>new g(e,a));b.useEffect(()=>{i.setOptions(a)},[i,a]);let j=b.useSyncExternalStore(b.useCallback(a=>i.subscribe(d.notifyManager.batchCalls(a)),[i]),()=>i.getCurrentResult(),()=>i.getCurrentResult()),k=b.useCallback((a,b)=>{i.mutate(a,b).catch(f.noop)},[i]);if(j.error&&(0,f.shouldThrowError)(i.options.throwOnError,[j.error]))throw j.error;return{...j,mutate:k,mutateAsync:j.mutate}}a.s(["useMutation",()=>i],70025)},3130,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(97895);let e=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("div",{ref:e,className:(0,d.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",a),...c}));e.displayName="Card";let f=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("div",{ref:e,className:(0,d.cn)("flex flex-col space-y-1.5 p-6",a),...c}));f.displayName="CardHeader";let g=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("h3",{ref:e,className:(0,d.cn)("text-2xl font-semibold leading-none tracking-tight",a),...c}));g.displayName="CardTitle";let h=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("p",{ref:e,className:(0,d.cn)("text-sm text-muted-foreground",a),...c}));h.displayName="CardDescription";let i=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("div",{ref:e,className:(0,d.cn)("p-6 pt-0",a),...c}));i.displayName="CardContent",c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("div",{ref:e,className:(0,d.cn)("flex items-center p-6 pt-0",a),...c})).displayName="CardFooter",a.s(["Card",()=>e,"CardContent",()=>i,"CardDescription",()=>h,"CardHeader",()=>f,"CardTitle",()=>g])},5522,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(97895);let e=c.forwardRef(({className:a,type:c,...e},f)=>(0,b.jsx)("input",{type:c,className:(0,d.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",a),ref:f,...e}));e.displayName="Input",a.s(["Input",()=>e])},17171,a=>{"use strict";var b=a.i(87924),c=a.i(72131);a.i(35112);var d=a.i(11011),e=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((a,e)=>{let f=(0,d.createSlot)(`Primitive.${e}`),g=c.forwardRef((a,c)=>{let{asChild:d,...g}=a;return(0,b.jsx)(d?f:e,{...g,ref:c})});return g.displayName=`Primitive.${e}`,{...a,[e]:g}},{}),f=c.forwardRef((a,c)=>(0,b.jsx)(e.label,{...a,ref:c,onMouseDown:b=>{b.target.closest("button, input, select, textarea")||(a.onMouseDown?.(b),!b.defaultPrevented&&b.detail>1&&b.preventDefault())}}));f.displayName="Label";var g=a.i(187),h=a.i(97895);let i=(0,g.cva)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),j=c.forwardRef(({className:a,...c},d)=>(0,b.jsx)(f,{ref:d,className:(0,h.cn)(i(),a),...c}));j.displayName=f.displayName,a.s(["Label",()=>j],17171)},18431,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944),e=a.i(40695),f=a.i(5522),g=a.i(17171),h=a.i(3130),i=a.i(70025),j=a.i(37927),k=a.i(53250),l=a.i(14501),m=a.i(70106);let n=(0,m.default)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);var o=a.i(33508);let p=(0,m.default)("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);function q({mode:a="create",initialData:m=null,propertyId:q,onSuccess:r}){let s=(0,d.useRouter)(),{toast:t}=(0,l.useToast)(),u=(0,j.useQueryClient)(),[v,w]=(0,c.useState)(1),[x,y]=(0,c.useState)(()=>({name:m?.name||"",nearestCollege:m?.nearestCollege||"",distanceFromCollege:m?.distanceFromCollege||"",facilities:m?.facilities||[],images:m?.images||[],files:[]})),[z,A]=(0,c.useState)(m?.rooms?.length?m.rooms.map(a=>({...a})):[{roomType:"single",capacity:1,availableCount:1,monthlyRent:"",securityDeposit:"",rules:[]}]),[B,C]=(0,c.useState)(""),[D,E]=(0,c.useState)(""),[F,G]=(0,c.useState)(0),H=(0,i.useMutation)({mutationFn:async b=>{let c=b.images||[];if(b.files&&b.files.length>0){let a=new FormData;b.files.forEach(b=>a.append("images",b)),c=(await k.default.post("/uploads/images",a)).data.urls||[]}if("create"===a){let a=await k.default.post("/properties",{name:b.name,nearestCollege:b.nearestCollege,distanceFromCollege:Number(b.distanceFromCollege),facilities:b.facilities,images:c}),d=a.data.property._id;for(let a of b.rooms)await k.default.post(`/properties/${d}/rooms`,{roomType:a.roomType,capacity:Number(a.capacity),availableCount:Number(a.availableCount),monthlyRent:Number(a.monthlyRent),securityDeposit:Number(a.securityDeposit),rules:a.rules});return a.data}let d=m?.images||[],e=b.images.filter(a=>d.includes(a)),f=b.images.filter(a=>!d.includes(a)),g={...b,existingImages:e,newImages:f,rooms:b.rooms};return delete g.files,delete g.images,(await k.default.put(`/properties/${q}`,g)).data},onSuccess:b=>{"create"===a?(t({title:"Property created",description:"Your property has been submitted for approval"}),u.invalidateQueries({queryKey:["owner-properties"]}),s.push("/owner/dashboard")):(t({title:"Property updated",description:"Property updated successfully"}),u.invalidateQueries({queryKey:["owner-properties"]}),r?r():s.push("/owner/dashboard"))},onError:a=>{t({title:"Error",description:a.response?.data?.message||"Failed to save property",variant:"destructive"})}}),I=()=>{B.trim()&&(y({...x,facilities:[...x.facilities,B.trim()]}),C(""))},J=()=>{if(D.trim()&&z[F]){let a=[...z];a[F].rules=[...a[F].rules,D.trim()],A(a),E("")}};return(0,b.jsx)("div",{className:"min-h-screen bg-gray-50 py-12",children:(0,b.jsxs)("div",{className:"container mx-auto px-4 max-w-3xl",children:[(0,b.jsx)("h1",{className:"text-4xl font-bold mb-8",children:"create"===a?"List Your Property":"Edit Property"}),(0,b.jsxs)("form",{onSubmit:a=>{a.preventDefault(),H.mutate({...x,files:x.files,rooms:z})},children:[1===v&&(0,b.jsxs)(h.Card,{children:[(0,b.jsx)(h.CardHeader,{children:(0,b.jsx)(h.CardTitle,{children:"Property Information"})}),(0,b.jsxs)(h.CardContent,{className:"space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)(g.Label,{htmlFor:"name",children:"Property Name *"}),(0,b.jsx)(f.Input,{id:"name",value:x.name,onChange:a=>y({...x,name:a.target.value}),required:!0,placeholder:"e.g., Sunshine Apartments"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(g.Label,{htmlFor:"nearestCollege",children:"Nearest College *"}),(0,b.jsx)(f.Input,{id:"nearestCollege",value:x.nearestCollege,onChange:a=>y({...x,nearestCollege:a.target.value}),required:!0,placeholder:"e.g., MIT"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(g.Label,{htmlFor:"distance",children:"Distance from College (km) *"}),(0,b.jsx)(f.Input,{id:"distance",type:"number",step:"0.1",value:x.distanceFromCollege,onChange:a=>y({...x,distanceFromCollege:a.target.value}),required:!0,placeholder:"e.g., 2.5"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(g.Label,{children:"Facilities"}),(0,b.jsxs)("div",{className:"flex gap-2 mb-2",children:[(0,b.jsx)(f.Input,{value:B,onChange:a=>C(a.target.value),placeholder:"e.g., WiFi, AC, Parking",onKeyPress:a=>"Enter"===a.key&&(a.preventDefault(),I())}),(0,b.jsx)(e.Button,{type:"button",onClick:I,children:(0,b.jsx)(n,{className:"h-4 w-4"})})]}),(0,b.jsx)("div",{className:"flex flex-wrap gap-2",children:x.facilities.map((a,c)=>(0,b.jsxs)("span",{className:"px-3 py-1 bg-primary/10 text-primary rounded-full text-sm flex items-center gap-2",children:[a,(0,b.jsx)("button",{type:"button",onClick:()=>{y({...x,facilities:x.facilities.filter((a,b)=>b!==c)})},className:"hover:text-primary/80",children:(0,b.jsx)(o.X,{className:"h-3 w-3"})})]},c))})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(g.Label,{children:"Property Images"}),(0,b.jsxs)("div",{className:"border-2 border-dashed rounded-lg p-8 text-center",children:[(0,b.jsx)(p,{className:"h-12 w-12 mx-auto mb-4 text-gray-400"}),(0,b.jsx)("input",{type:"file",accept:"image/*",multiple:!0,onChange:a=>{let b=Array.from(a.target.files||[]);if(0===b.length)return;let c=b.map(a=>URL.createObjectURL(a));y({...x,images:[...x.images,...c],files:[...x.files,...b]})},className:"hidden",id:"image-upload"}),(0,b.jsx)("label",{htmlFor:"image-upload",children:(0,b.jsx)(e.Button,{type:"button",variant:"outline",asChild:!0,children:(0,b.jsx)("span",{children:"Upload Images"})})}),(0,b.jsx)("p",{className:"text-sm text-gray-500 mt-2",children:"Upload multiple images of your property"})]}),x.images.length>0&&(0,b.jsx)("div",{className:"grid grid-cols-4 gap-2 mt-4",children:x.images.map((a,c)=>(0,b.jsxs)("div",{className:"relative h-24 bg-gray-200 rounded",children:[(0,b.jsx)("img",{src:a,alt:`Property ${c+1}`,className:"w-full h-full object-cover rounded"}),(0,b.jsx)("button",{type:"button",onClick:()=>y({...x,images:x.images.filter((a,b)=>b!==c)}),className:"absolute top-1 right-1 bg-red-500 text-white rounded-full p-1",children:(0,b.jsx)(o.X,{className:"h-3 w-3"})})]},c))})]}),(0,b.jsx)(e.Button,{type:"button",onClick:()=>w(2),className:"w-full",children:"Next: Add Rooms"})]})]}),2===v&&(0,b.jsxs)(h.Card,{children:[(0,b.jsx)(h.CardHeader,{children:(0,b.jsx)(h.CardTitle,{children:"Room Information"})}),(0,b.jsxs)(h.CardContent,{className:"space-y-4",children:[z.map((a,c)=>(0,b.jsxs)("div",{className:"border rounded-lg p-4 space-y-4",children:[(0,b.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,b.jsxs)("h3",{className:"font-semibold",children:["Room ",c+1]}),z.length>1&&(0,b.jsx)(e.Button,{type:"button",variant:"ghost",size:"sm",onClick:()=>{A(z.filter((a,b)=>b!==c)),F>=z.length-1&&G(Math.max(0,F-1))},children:(0,b.jsx)(o.X,{className:"h-4 w-4"})})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)(g.Label,{children:"Room Type *"}),(0,b.jsxs)("select",{value:a.roomType,onChange:a=>{let b=[...z];b[c].roomType=a.target.value,A(b)},className:"w-full px-3 py-2 border rounded-md",required:!0,children:[(0,b.jsx)("option",{value:"single",children:"Single"}),(0,b.jsx)("option",{value:"sharing",children:"Sharing"})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(g.Label,{children:"Capacity *"}),(0,b.jsx)(f.Input,{type:"number",min:"1",value:a.capacity,onChange:a=>{let b=[...z];b[c].capacity=a.target.value,A(b)},required:!0})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(g.Label,{children:"Available Count *"}),(0,b.jsx)(f.Input,{type:"number",min:"0",value:a.availableCount,onChange:a=>{let b=[...z];b[c].availableCount=a.target.value,A(b)},required:!0})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(g.Label,{children:"Monthly Rent (₹) *"}),(0,b.jsx)(f.Input,{type:"number",min:"0",value:a.monthlyRent,onChange:a=>{let b=[...z];b[c].monthlyRent=a.target.value,A(b)},required:!0})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(g.Label,{children:"Security Deposit (₹) *"}),(0,b.jsx)(f.Input,{type:"number",min:"0",value:a.securityDeposit,onChange:a=>{let b=[...z];b[c].securityDeposit=a.target.value,A(b)},required:!0})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(g.Label,{children:"Room Rules"}),(0,b.jsxs)("div",{className:"flex gap-2 mb-2",children:[(0,b.jsx)(f.Input,{value:c===F?D:"",onChange:a=>{E(a.target.value),G(c)},placeholder:"e.g., No smoking, No pets",onKeyPress:a=>"Enter"===a.key&&(a.preventDefault(),J())}),(0,b.jsx)(e.Button,{type:"button",onClick:()=>{G(c),J()},children:(0,b.jsx)(n,{className:"h-4 w-4"})})]}),(0,b.jsx)("div",{className:"flex flex-wrap gap-2",children:a.rules.map((a,c)=>(0,b.jsxs)("span",{className:"px-3 py-1 bg-gray-100 rounded-full text-sm flex items-center gap-2",children:[a,(0,b.jsx)("button",{type:"button",onClick:()=>{let a;(a=[...z])[F].rules=a[F].rules.filter((a,b)=>b!==c),A(a)},className:"hover:text-red-500",children:(0,b.jsx)(o.X,{className:"h-3 w-3"})})]},c))})]})]},c)),(0,b.jsxs)(e.Button,{type:"button",onClick:()=>{A([...z,{roomType:"single",capacity:1,availableCount:1,monthlyRent:"",securityDeposit:"",rules:[]}]),G(z.length),w(2)},variant:"outline",className:"w-full",children:[(0,b.jsx)(n,{className:"h-4 w-4 mr-2"}),"Add Another Room Type"]}),(0,b.jsxs)("div",{className:"flex gap-4",children:[(0,b.jsx)(e.Button,{type:"button",onClick:()=>w(1),variant:"outline",className:"flex-1",children:"Back"}),(0,b.jsx)(e.Button,{type:"submit",disabled:H.isPending,className:"flex-1",children:H.isPending?"Submitting...":"create"===a?"Submit Property":"Save Changes"})]})]})]})]})]})})}function r(){return(0,b.jsx)(q,{mode:"create"})}a.s(["PropertyForm",()=>q,"default",()=>r],18431)}];

//# sourceMappingURL=_e0b0dc5d._.js.map